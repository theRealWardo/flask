angular.module("app",["ngRoute","ui.bootstrap"]).config(["$routeProvider",function(a){a.when("/login",{templateUrl:"templates/login.html",controller:"LoginController"}).when("/signup",{templateUrl:"templates/signup.html",controller:"SignupController"}).otherwise({redirectTo:"/login"})}]),angular.module("app").controller("AlertDemoCtrl",["$scope","alertsService",function(a,b){a.alerts=b.alerts}]),angular.module("app").controller("LoginController",["$scope","$location","loginService",function(a,b,c){a.go=function(a){b.path(a)},a.loginService=c}]),angular.module("app").controller("SignupController",["$scope","$location","loginService",function(a,b,c){a.go=function(a){b.path(a)},a.loginService=c}]),angular.module("app").service("alertsService",function(){this.alerts=[],this.clear=function(){for(;this.alerts.length;)this.alerts.pop()},this.danger=function(a){this.alerts.push({type:"danger",msg:a})},this.success=function(a){this.alerts.push({type:"success",msg:a})},this.add=function(a){this.alerts.push({msg:a})}}),angular.module("app").service("loginService",["$http","alertsService",function(a,b){this.name="",this.email="",this.password="",this.confirmPassword="",this.pending=!1,this.accessToken=null,this.refreshToken=null,this.login=function(){this.pending=!0,b.clear(),a.post("/webauth/signin",{email:this.email,password:this.password}).success(angular.bind(this,this.onLogin)).error(angular.bind(this,this.onError))},this.onLogin=function(a){this.pending=!1,a.access_token?(this.accessToken=a.access_token,this.refreshToken=a.refresh_token):b.danger(a.error)},this.signup=function(){this.pending=!0,b.clear(),a.post("/auth/signup",{name:this.name,password:this.password}).success(angular.bind(this,this.onSignup)).error(angular.bind(this,this.onError))},this.onSignup=function(a){this.pending=!1,"ok"==a.status?this.login():b.danger(a.error)},this.onError=function(a){console.log(a),this.pending=!1}}]);